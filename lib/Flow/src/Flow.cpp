#include "Flow.h"

const double FLOW_ARRAY[50] = {
7.502874570879956,
7.546970956835654,
7.528617070721051,
7.47489231616942,
7.660950485760032,
7.4839574759269105,
7.5139216461619505,
7.62556970117217,
7.514814100230338,
7.611796344687928,
7.473698780454427,
7.4490200694484425,
7.500525065664179,
7.47208055613987,
7.54907135830628,
7.527879856244135,
7.4342832500628955,
7.305783139722301,
7.094833813645778,
6.936338894798589,
6.828259129994666,
6.671772471032258,
6.575813842497054,
6.4525710903391,
6.320544705057636,
6.127047826477204,
6.042070783430748,
5.884149740099598,
5.788807516570071,
5.657785031296949,
5.507041492795857,
5.468007007326282,
5.428691497923702,
5.201808220339636,
5.200396269725466,
5.018222696868461,
4.970755770943065,
4.781618175172344,
4.6845424128729585,
4.623389724221694,
4.53827489741171,
4.400659018647855,
4.382218041731988,
4.289929185255976,
4.2555181359142855,
4.137084861031057,
4.10031730456786,
3.9635598890249173,
3.882647701827705,
3.8412362725410047,
};

void FlowSensor::init() {
    this->lastIndex = 0;
    for (int i = 0; i < 50; i++) {
        this->flowArray[i] = FLOW_ARRAY[i];
    }
}

double FlowSensor::getFlow() {
    int ind = this->lastIndex % 50;
    this->lastIndex++;
    return this->flowArray[ind];
}